# Meme Economy Bot 2.0

Telegram-–±–æ—Ç —ñ–∑ –º–µ–º–Ω–æ—é –µ–∫–æ–Ω–æ–º—ñ–∫–æ—é, –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º —ñ –≥–µ–π–º—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–º–∏ –∫–µ–π—Å–∞–º–∏. –°—Ç–µ–∫: `Python 3.11`, `aiogram 3`, `SQLAlchemy async`, `asyncpg/SQLite`, –º—ñ–≥—Ä–∞—Ü—ñ—ó Alembic —ñ —Å–∏–¥–µ—Ä–∏. –ü—Ä–æ—î–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –¥–µ–ø–ª–æ—é –Ω–∞ Render —É —Ä–µ–∂–∏–º—ñ long polling.

## –§—ñ—á—ñ
- üí∏ –≤–∞–ª—é—Ç–∞ **VUSDT**: —Å—Ç–∞—Ä—Ç–æ–≤–∏–π –∫–∞–ø—ñ—Ç–∞–ª 1000 VUSDT, —â–æ–¥–µ–Ω–Ω–∏–π –±–æ–Ω—É—Å 120 VUSDT, –∫–æ–º—ñ—Å—ñ—ó –Ω–∞ –ø–µ—Ä–µ–∫–∞–∑–∏ 5%
- üèÜ Collector Points, —Ä–∞–Ω–≥–∏ —Ç–∞ –¥–æ—Å—Ç—É–ø –¥–æ VIP-–∫–µ–π—Å—ñ–≤ (Collector Vault, Mythic Rift)
- üéÅ 502 —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –ø—Ä–µ–¥–º–µ—Ç–∏ —Å–µ–º–∏ —Ä—ñ–¥–∫–æ—Å—Ç–µ–π (common ‚Üí mythical) —ñ–∑ —Ç–∏–ø–∞–º–∏ `sticker/gif/avatar/frame/artifact`
- üì¶ 12 –∫–µ–π—Å—ñ–≤ —ñ–∑ pity-—Å–∏—Å—Ç–µ–º–æ—é, —Ç–µ–º–∞—Ç–∏—á–Ω–∏–º–∏ –¥–æ–±—ñ—Ä–∫–∞–º–∏ (Pepe, Doge, Wojak, Gif Masters —Ç–æ—â–æ) —ñ –≤–ª–∞—Å–Ω–∏–º–∏ –æ–±–∫–ª–∞–¥–∏–Ω–∫–∞–º–∏
- üõí –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ (—Å—Ç—ñ–∫–µ—Ä–∏, GIF, –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ñ, –º—ñ—Ñ—ñ—á–Ω—ñ), –º–∏—Ç—Ç—î–≤–∏–º –≤–∏–∫—É–ø–æ–º –±–æ—Ç–æ–º —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—î—é –ª–æ—Ç—ñ–≤
- ü§ù –ø—Ä—è–º—ñ –ø–µ—Ä–µ–∫–∞–∑–∏ `/send @user 100` –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –æ–¥–µ—Ä–∂—É–≤–∞—á–∞ —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç—Ä–µ–π–¥-–∑–∞–ø–∏—Ç—ñ–≤ `/trade`
- üë§ –∫–Ω–æ–ø–∫–æ–≤–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è (–≤—ñ–¥–∫—Ä–∏—Ç–∏ –∫–µ–π—Å, —ñ–Ω–≤–µ–Ω—Ç–∞—Ä, –º–∞—Ä–∫–µ—Ç, —Ç—Ä–µ–π–¥–∏, –ø—Ä–æ—Ñ—ñ–ª—å, –∫–≤–µ—Å—Ç–∏) + –∫–∞—Å—Ç–æ–º–Ω—ñ –æ–ø–∏—Å–∏ –≤ `/start`/`/help`
- üìà –ª—ñ–¥–µ—Ä–±–æ—Ä–¥–∏ –∑–∞ –±–∞–ª–∞–Ω—Å–æ–º VUSDT, Collector Points —ñ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –º—ñ—Ñ—ñ—á–Ω–∏—Ö –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- üîê –≥–ª–æ–±–∞–ª—å–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–º–∏–ª–æ–∫ –∑ –¥—Ä—É–∂–Ω—ñ–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º, –ª–æ–≥-—Ñ–∞–π–ª `logs/bot.log`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
.
‚îú‚îÄ app/
‚îÇ  ‚îú‚îÄ main.py                # –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞, –ª–æ–≥—É–≤–∞–Ω–Ω—è, error handler
‚îÇ  ‚îú‚îÄ config.py              # Pydantic Settings (.env, fallback SQLite, log file)
‚îÇ  ‚îú‚îÄ db/                    # engine, –º–æ–¥–µ–ª—ñ, Alembic
‚îÇ  ‚îú‚îÄ handlers/              # aiogram-—Ä–æ—É—Ç–µ—Ä–∏ (–∫–æ–º–∞–Ω–¥–∏, –∫–Ω–æ–ø–∫–∏, —Ç—Ä–µ–π–¥–∏, –ø–µ—Ä–µ–∫–∞–∑–∏)
‚îÇ  ‚îú‚îÄ services/              # –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ (users, economy, cases, market, pricing, referrals)
‚îÇ  ‚îú‚îÄ seeds/                 # catalog.json (502 items), cases.json (12 –∫–µ–π—Å—ñ–≤), seed.py
‚îÇ  ‚îú‚îÄ scheduler/cron_daily.py# –¥–æ–±–æ–≤–µ –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è CP
‚îÇ  ‚îú‚îÄ texts/                 # –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é
‚îÇ  ‚îî‚îÄ utils/keyboard/etc     # —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è, RNG, throttling
‚îú‚îÄ tests/                    # pytest –∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º–∏ —Ñ—ñ–∫—Å—Ç—É—Ä–∞–º–∏
‚îú‚îÄ Procfile / render.yaml    # –¥–µ–ø–ª–æ–π –Ω–∞ Render (worker + –ë–î)
‚îú‚îÄ requirements.txt
‚îú‚îÄ runtime.txt
‚îî‚îÄ README.md
```

## –ö–æ–º–∞–Ω–¥–∏ —Ç–∞ –∫–Ω–æ–ø–∫–∏
| –ö–æ–º–∞–Ω–¥–∞/–∫–Ω–æ–ø–∫–∞ | –û–ø–∏—Å |
| --- | --- |
| `/start`, `/help` | –ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è, —Ç—É—Ç–æ—Ä—ñ–∞–ª, –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞ |
| `/balance` | –ë–∞–ª–∞–Ω—Å VUSDT —ñ CP |
| `/daily` | –©–æ–¥–µ–Ω–Ω–∏–π –±–æ–Ω—É—Å –∑ –∞–Ω—Ç–∏-—Å–ø–∞–º–æ–º |
| `/cases`, –∫–Ω–æ–ø–∫–∞ ¬´üì¶ –í—ñ–¥–∫—Ä–∏—Ç–∏ –∫–µ–π—Å¬ª | –ü–µ—Ä–µ–ª—ñ–∫ –∫–µ–π—Å—ñ–≤, —Å—Ç–∞—Ç—É—Å–∏ —Ä–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è |
| `/open PepeCase` | –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –∫–µ–π—Å—É –∑ –∞–Ω—ñ–º–æ–≤–∞–Ω–∏–º ¬´–ø—Ä–æ–∫—Ä—É—Ç–æ–º¬ª |
| `/inventory`, –∫–Ω–æ–ø–∫–∞ ¬´üéÅ –Ü–Ω–≤–µ–Ω—Ç–∞—Ä¬ª | –ü–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–µ–¥–º–µ—Ç—ñ–≤, ID –¥–ª—è –ø—Ä–æ–¥–∞–∂—É/–º–∞—Ä–∫–µ—Ç—É |
| `/sell_to_bot`, –∫–Ω–æ–ø–∫–∞ ¬´üí∏ –ü—Ä–æ–¥–∞—Ç–∏ –±–æ—Ç—É¬ª | –ú–∏—Ç—Ç—î–≤–∏–π –≤–∏–∫—É–ø –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é —Ä—ñ–¥–∫—ñ—Å—Ç—å√ó—Ç–∏–ø√ó–∫–æ–ª—ñ—Ä |
| `/market`, –∫–Ω–æ–ø–∫–∞ ¬´üõí –ú–∞—Ä–∫–µ—Ç¬ª + —Ñ—ñ–ª—å—Ç—Ä–∏ | –õ–æ—Ç–∏ –∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ (—Å—Ç—ñ–∫–µ—Ä–∏/GIF/–ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ñ/–º—ñ—Ñ—ñ—á–Ω—ñ) |
| `/list_item`, `/buy_item` | –í–∏—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Ç–∞ –∫—É–ø—ñ–≤–ª—è –ª–æ—Ç—ñ–≤ |
| `/send @user 100` | –ü–µ—Ä–µ–∫–∞–∑ VUSDT —ñ–Ω—à–æ–º—É –≥—Ä–∞–≤—Ü—é (5% –ø–æ–¥–∞—Ç–æ–∫) |
| `/trade @user pepeblue#2442 for wojak#9911`, –∫–Ω–æ–ø–∫–∞ ¬´üîÑ –¢—Ä–µ–π–¥¬ª | –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç—Ä–µ–π–¥-–∑–∞–ø–∏—Ç—ñ–≤ —ñ –æ–ø–æ–≤—ñ—â–µ–Ω–Ω—è —Ü—ñ–ª—ñ |
| `/profile`, –∫–Ω–æ–ø–∫–∞ ¬´üë§ –ü—Ä–æ—Ñ—ñ–ª—å¬ª | –ë–∞–ª–∞–Ω—Å, CP, —â–æ–¥–µ–Ω–Ω–∏–π –ø—Ä–∏—Ä—ñ—Å—Ç CP, —Ä–∞–Ω–≥–∏, —ñ–Ω–≤–µ–Ω—Ç–∞—Ä |
| `/leaderboard`, –∫–Ω–æ–ø–∫–∞ ¬´üèÜ –†–µ–π—Ç–∏–Ω–≥–∏¬ª | –¢–û–ü –ø–æ –±–∞–ª–∞–Ω—Å—É, CP, –º—ñ—Ñ—ñ–∫–∞—Ö |
| `/refer` | –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è, –±–æ–Ω—É—Å 150 VUSDT + 10% –≤—ñ–¥ daily |
| `/quests`, –∫–Ω–æ–ø–∫–∞ ¬´üéØ –ö–≤–µ—Å—Ç–∏¬ª | Placeholder –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –ø–æ–¥—ñ–π |

## –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫
1. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ**:
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
2. **–°—Ç–≤–æ—Ä—ñ—Ç—å `.env`** –Ω–∞ –æ—Å–Ω–æ–≤—ñ [.env.sample](.env.sample). –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –º–æ–∂–Ω–∞ –Ω–µ –∑–∞–¥–∞–≤–∞—Ç–∏ `DATABASE_URL` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î—Ç—å—Å—è SQLite (`data/meme_economy.db`).
3. **–ú—ñ–≥—Ä–∞—Ü—ñ—ó**:
   ```bash
   alembic upgrade head
   ```
4. **–°–∏–¥—É–≤–∞–Ω–Ω—è –∫–∞—Ç–∞–ª–æ–≥—É —Ç–∞ –∫–µ–π—Å—ñ–≤**:
   ```bash
   python app/seeds/seed.py
   ```
5. **–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**:
   ```bash
   python -m app.main
   ```
   –õ–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É –∫–æ–Ω—Å–æ–ª—ñ —Ç–∞ —É —Ñ–∞–π–ª—ñ `logs/bot.log`.

## –î–µ–ø–ª–æ–π –Ω–∞ Render
1. –ó–∞–ø—É—à—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –Ω–∞ GitHub.
2. –ù–∞ Render —Å—Ç–≤–æ—Ä—ñ—Ç—å Blueprint —ñ–∑ `render.yaml`. –°–µ—Ä–≤—ñ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–æ—Ä–∫–µ—Ä `python -m app.main`.
3. –£ —Ä–æ–∑–¥—ñ–ª—ñ *Environment* –¥–æ–¥–∞–π—Ç–µ `BOT_TOKEN`. –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Render Database, —Å–∫–æ–ø—ñ—é–π—Ç–µ `DATABASE_URL`; —ñ–Ω–∞–∫—à–µ –º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏—Å—è –Ω–∞ SQLite (–∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ—Ç—å—Å—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –¥–∏—Å–∫—É —Å–µ—Ä–≤—ñ—Å—É).
4. –ë–æ—Ç –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ long polling, –≤–µ–±—Ö—É–∫–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ. –î–ª—è —â–æ–¥–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–∫—É CP –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ Render Cron, —â–æ –≤–∏–∫–ª–∏–∫–∞—î `python app/scheduler/cron_daily.py`.

## –¢–µ—Å—Ç–∏ —Ç–∞ —è–∫—ñ—Å—Ç—å
- —é–Ω—ñ—Ç-—Ç–µ—Å—Ç–∏: `pytest`
- –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ —Ñ—ñ–∫—Å—Ç—É—Ä–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å —Ç–∏–º—á–∞—Å–æ–≤—É –ë–î SQLite —ñ –ø—Ä–æ–≥–∞–Ω—è—é—Ç—å —Å—Ö–µ–º—É
- –∑–∞ –ø–æ—Ç—Ä–µ–±–∏ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ `ruff`/`flake8`; –∫–æ–¥ –º—ñ—Å—Ç–∏—Ç—å —Ç–∏–ø–∏ —Ç–∞ –¥–æ–∫—Å—Ç—Ä—ñ–Ω–≥–∏ –¥–ª—è –∫–ª—é—á–æ–≤–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤

## –ë–µ–∑–ø–µ–∫–∞
- **–ù–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ñ —Ç–æ–∫–µ–Ω–∏** —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `.env` —ñ Render Secrets
- –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –ª–æ–≥–∏ (`logs/bot.log`) –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –ø–æ–º–∏–ª–æ–∫ —ñ —Å–ø—Ä–æ–± –∑–ª–æ–≤–∂–∏–≤–∞–Ω—å
- –†–µ–∑–µ—Ä–≤—É–π—Ç–µ –ë–î (PostgreSQL –∞–±–æ SQLite-—Ñ–∞–π–ª) –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏

–ó–±–∏—Ä–∞–π—Ç–µ –º–µ–º–∏, —Ä–æ–∑–∫—Ä—É—á—É–π—Ç–µ –∫–µ–π—Å–∏ –π –æ—á–æ–ª—é–π—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥–∏! üöÄ
